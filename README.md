# 招标文件分析工作流

## 📖 项目简介

本项目是一个基于 LangGraph 的智能招标文件分析工作流，专为网络安全售前工程师设计。通过自动化分析招标文件和投标文件，实现多维度检查与预评分，生成详细的修改建议，帮助用户快速提升投标文件的竞争力，降低废标风险。

---

## 🎯 应用场景

### 1. 招标文件深度解析
- 自动提取招标文件中的商务要求、商务评分规则、技术评分细则、废标项等关键信息
- 生成结构化的检查清单，为后续检查奠定基础

### 2. 投标文件全面检查
- **废标项检查**：识别可能导致直接废标的致命问题
- **商务得分点检查**：评估商务部分得分情况，识别失分点
- **技术方案检查**：评估技术方案的完整性、创新性、可行性
- **指标与应答检查**：检查是否逐条响应招标文件要求
- **技术得分点检测**：深度检查技术评分细则覆盖情况
- **投标文件结构检查**：检查目录结构是否符合模板要求

### 3. 投标文件优化建议
- 按优先级排序生成修改建议清单
- 提供具体的修改示例和改进方案
- 预测修改后的得分提升效果

### 4. 投标前自检
- 在提交投标前进行自我检查，避免低级错误
- 识别可能被专家评审扣分的细节问题
- 提前优化投标文件，提升中标概率

---

## 💡 主要功能介绍

### 1. 智能文件解析
- **招标文件解析**：自动提取招标文件的文本内容
- **投标文件解析**：支持 PDF、Word 等多种格式文档的文本提取
- **格式兼容**：自动识别文档类型，选择合适的解析方式

### 2. 六维并行检测
本项目采用六维度并行检测模式，从不同角度全面检查投标文件：

#### 🔴 废标项检查
- 逐条检查招标文件中的废标项要求
- 识别废标风险，提供具体原因和修改建议
- 重点标注致命问题，避免投标无效

#### 📊 商务得分点检查
- 根据商务评分规则估算得分
- 识别失分点，提供改进措施
- 覆盖企业资质、业绩情况、团队实力、服务承诺等维度

#### 🛠️ 技术方案检查
- 评估技术方案的完整性、创新性、可行性
- 分析技术指标达标情况
- 识别技术方案的薄弱环节

#### ✅ 指标与应答检查
- 检查是否逐条响应技术指标要求
- 识别遗漏或应答不充分的地方
- 提供应答完善建议

#### 🎯 技术得分点检测（新增）
- 深度检查技术评分细则覆盖情况
- 识别遗漏的技术得分点
- 识别应答不充分、应答错误的问题
- 提供技术得分优化建议

#### 📁 投标文件结构检查（新增）
- 检查目录完整性（商务部分和技术部分）
- 识别缺失的目录项
- 检查目录与内容排布是否合理
- 识别影响专家快速定位得分点的结构问题
- 提供结构优化建议

### 3. 智能修改建议汇总
- 整合所有检查结果
- 按优先级排序（P0致命问题、P1严重问题、P2一般问题、P3优化建议）
- 提供详细的修改示例和改进方案
- 预测改进后的得分提升效果

### 4. 预期效果评估
- 废标风险评估
- 商务得分预测
- 技术得分预测
- 综合竞争力评估

---

## 🔄 主要流程介绍

### 工作流架构图

```
招标文件 + 投标文件
        ↓
    ┌───────────────┐
    │  文件解析阶段  │
    └───────────────┘
        ↓
┌─────────────┐
│ 招标文件解析 │
└─────────────┘
        ↓
┌─────────────┐
│ 投标文件解析 │
└─────────────┘
        ↓
    ┌───────────────┐
    │  生成检查清单  │
    └───────────────┘
        ↓
    ┌───────────────┐
    │  六维并行检测  │
    └───────────────┘
        ↓
    ┌──────────────────────────────────────────┐
    │                                          │
    ├─────────────┬─────────────┬────────────┤
    │ 废标项检查  │ 商务得分检查 │ 技术方案检查│
    ├─────────────┼─────────────┼────────────┤
    │ 指标应答检查│ 技术得分检查 │ 结构检查   │
    └─────────────┴─────────────┴────────────┘
        ↓
    ┌───────────────┐
    │  汇总修改建议  │
    └───────────────┘
        ↓
    ┌───────────────┐
    │  输出检查报告  │
    └───────────────┘
```

### 详细流程说明

#### 第一阶段：文件解析（串行）
1. **招标文件解析**：提取招标文件的文本内容，识别章节结构
2. **投标文件解析**：提取投标文件的文本内容，支持多种格式

#### 第二阶段：生成检查清单（串行）
3. **智能提取**：从招标文件中自动提取以下关键信息：
   - 废标项要求
   - 商务要求
   - 商务评分规则
   - 技术评分细则
   - 其他关键要求
4. **结构化输出**：生成清晰的检查清单，便于后续检查

#### 第三阶段：六维并行检测（并行）
5. **废标项检查**：逐条检查废标项，识别废标风险
6. **商务得分点检查**：评估商务得分，识别失分点
7. **技术方案检查**：评估技术方案质量，识别薄弱环节
8. **指标与应答检查**：检查技术指标响应情况
9. **技术得分点检测**：深度检查技术评分细则覆盖情况
10. **投标文件结构检查**：检查目录结构和排布合理性

#### 第四阶段：汇总修改建议（汇聚）
11. **整合结果**：将六个维度的检查结果进行整合
12. **优先级排序**：按严重程度和影响范围排序
13. **生成建议**：提供详细的修改建议清单和改进方案

#### 第五阶段：输出报告
14. **生成报告**：输出完整的检查报告，包括：
    - 废标项检查结果
    - 商务得分点检查结果
    - 技术方案检查结果
    - 指标与应答检查结果
    - 技术得分点检测结果
    - 投标文件结构检查结果
    - 最终修改建议汇总

---

## 📖 使用说明

### 前置要求

- Python 3.8+
- 已安装项目依赖包（见 requirements.txt）
- 准备好招标文件和投标文件（支持 PDF、Word 格式）

### 输入参数

```json
{
  "tender_file": {
    "url": "path/to/tender_document.docx",
    "file_type": "document"
  },
  "bid_file": {
    "url": "path/to/bid_document.docx",
    "file_type": "document"
  }
}
```

**参数说明**：
- `tender_file`：招标文件路径，支持本地文件路径或网络 URL
- `bid_file`：投标文件路径，支持本地文件路径或网络 URL
- `file_type`：文件类型，通常为 "document"（PDF、Word 等文档）

### 运行方式

#### 方式一：通过 test_run 工具测试

```python
test_run(params={
    "tender_file": {
        "url": "assets/tender_document.docx",
        "file_type": "document"
    },
    "bid_file": {
        "url": "assets/bid_document.docx",
        "file_type": "document"
    }
})
```

#### 方式二：通过 main.py 运行

```bash
cd /workspace/projects
python src/main.py
```

### 输出内容

工作流将输出以下内容：

```json
{
  "final_modification_suggestions": "最终修改建议汇总",
  "invalid_items_check": "废标项检查结果",
  "commercial_score_check": "商务得分点检查结果",
  "technical_plan_check": "技术方案检查结果",
  "indicator_response_check": "指标与应答检查结果",
  "technical_score_check": "技术得分点检测结果",
  "bid_structure_check": "投标文件结构检查结果"
}
```

### 输出报告结构

#### 1. 修改建议优先级总览
- 致命问题（必须立即修改，否则废标）
- 严重问题（严重影响得分）
- 一般问题（影响部分得分）
- 优化建议（可提升竞争力）

#### 2. 各级别修改建议清单
每项建议包含：
- 问题类型
- 问题描述
- 影响后果/失分影响
- 修改位置
- 修改建议
- 修改示例（对比修改前后的效果）

#### 3. 修改执行建议
- 修改顺序建议
- 修改注意事项
- 修改后检查建议

#### 4. 预期改进效果
- 废标风险评估
- 商务得分预测
- 技术得分预测
- 综合竞争力评估

---

## 🚀 项目优势

### 1. 全面性
- **六维并行检测**：从废标项、商务、技术、指标、结构等多个维度全面检查
- **覆盖所有得分点**：确保不遗漏任何可能影响得分的细节
- **交叉验证**：多个检查维度相互验证，确保问题无遗漏

### 2. 专业性
- **基于招标文件评分规则**：严格按照招标文件的评分标准进行检查
- **模拟专家评审视角**：从专家角度识别问题和优化点
- **提供具体改进方案**：不仅指出问题，还提供可操作的修改建议

### 3. 高效性
- **并行执行**：六个检查节点并行执行，大幅提升处理速度
- **自动化分析**：无需人工逐项检查，节省大量时间
- **快速定位问题**：通过优先级排序，帮助用户快速聚焦关键问题

### 4. 实用性
- **详细修改示例**：提供修改前后的对比，便于理解
- **预期效果评估**：预测修改后的得分提升，明确改进价值
- **可操作性强**：所有建议都是具体可执行的，不是空泛的建议

### 5. 智能化
- **AI驱动**：基于大语言模型的智能分析能力
- **深度理解**：能够理解复杂的招标文件要求
- **上下文关联**：能够识别文件内容之间的关联性

### 6. 可扩展性
- **模块化设计**：每个检查节点独立，易于扩展和维护
- **配置灵活**：可以通过调整配置文件优化检查逻辑
- **易于集成**：可以轻松集成到现有的投标管理系统中

---

## 📊 实际效果

### 典型案例分析

**测试案例**：某网络安全项目招标

**初始状态**：
- 废标风险：存在废标风险（2个废标项不满足）
- 商务得分：13分/30分（得分率 43.33%）
- 技术得分：52分/70分
- 指标响应率：78.26%

**检查结果**：
- 致命问题：4项
- 严重问题：8项
- 一般问题：4项
- 优化建议：3项

**预期改进效果**：
- 废标风险：从"存在废标风险"降至"无废标风险"
- 商务得分：从13分提升至27-29分（得分率 90%以上）
- 技术得分：从52分提升至63-67分（得分率 90%以上）
- 综合竞争力：从"中等竞争力"提升至"高竞争力"

---

## 🔧 技术架构

### 技术栈
- **框架**：LangGraph（工作流编排）
- **语言**：Python 3.8+
- **AI模型**：豆包大语言模型（doubao-seed-1-8-251228）
- **文档处理**：pypdf, docx2python, python-pptx
- **依赖管理**：pip

### 项目结构
```
├── config/                          # 配置目录
│   ├── generate_checklist_cfg.json  # 生成检查清单节点配置
│   ├── invalid_items_check_cfg.json # 废标项检查节点配置
│   ├── commercial_score_check_cfg.json  # 商务得分检查配置
│   ├── technical_plan_check_cfg.json    # 技术方案检查配置
│   ├── indicator_response_check_cfg.json # 指标应答检查配置
│   ├── technical_score_check_cfg.json   # 技术得分点检查配置
│   ├── bid_structure_check_cfg.json     # 投标文件结构检查配置
│   └── modification_summary_cfg.json    # 修改建议汇总配置
├── src/                             # 源代码目录
│   ├── graphs/                      # 工作流代码
│   │   ├── state.py                 # 状态定义
│   │   ├── node.py                  # 节点函数实现
│   │   └── graph.py                 # 主图编排
│   ├── utils/                       # 工具类
│   └── main.py                      # 主入口
├── assets/                          # 资源目录
│   ├── tender_document.docx         # 测试招标文件
│   ├── bid_document.docx            # 测试投标文件
│   └── generate_test_docs.py        # 测试文件生成脚本
├── requirements.txt                 # 依赖包列表
├── README.md                        # 项目说明文档
└── AGENT.md                         # Agent规范文档
```

---

## 📝 注意事项

1. **文件格式**：确保上传的招标文件和投标文件是标准格式（PDF、Word）
2. **文件大小**：建议单个文件不超过 10MB
3. **内容完整性**：确保文件内容完整，无损坏或缺失
4. **保密要求**：请勿上传涉密文件
5. **结果验证**：建议结合人工审核，确保检查结果的准确性

---

## 🤝 技术支持

如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 联系项目维护者

---

## 📄 许可证

本项目采用 MIT 许可证。

---

## 🎉 结语

本项目旨在通过智能化、自动化、专业化的方式，帮助网络安全售前工程师提升投标文件的质量和竞争力。通过六维并行检测和智能修改建议，大幅降低废标风险，提升中标概率。

让我们一起用技术赋能招投标业务！

---

## 🌐 Web应用 - 通过互联网访问

本项目已提供Web界面，您可以通过浏览器访问和使用该系统。

### 快速启动（本地）

#### Linux/Mac用户
```bash
# 一键启动
./start.sh
```

#### Windows用户
```bash
# 双击运行
start.bat

# 或在命令行中执行
start.bat
```

启动成功后，在浏览器中访问：**http://localhost:8501**

### 部署到互联网（公开访问）

我们提供了多种免费的部署方案，您可以根据需求选择：

#### 🚀 方案一：Streamlit Cloud（推荐，最简单）
- **优点**：完全免费，专为Streamlit设计，5分钟即可部署
- **访问链接**：`https://你的应用名.streamlit.app`
- **详细教程**：查看 [DEPLOY.md](DEPLOY.md)

#### 🌟 方案二：Hugging Face Spaces
- **优点**：AI社区平台，易于被发现，完全免费
- **访问链接**：`https://huggingface.co/spaces/你的用户名/你的应用名`
- **详细教程**：查看 [DEPLOY.md](DEPLOY.md)

#### ☁️ 方案三：Render
- **优点**：支持Docker，自动部署，免费额度充足
- **访问链接**：`https://你的应用名.onrender.com`
- **详细教程**：查看 [DEPLOY.md](DEPLOY.md)

### 📋 快速部署步骤（以Streamlit Cloud为例）

1. **推送代码到GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/你的用户名/你的仓库名.git
   git push -u origin main
   ```

2. **登录Streamlit Cloud**
   - 访问：https://share.streamlit.io
   - 使用GitHub账号登录

3. **创建应用**
   - 点击 "New app"
   - 选择你的GitHub仓库
   - 主文件路径：`app.py`
   - 点击 "Deploy"

4. **获取访问链接**
   - 等待2-3分钟部署完成
   - 获得公开访问链接

### 🎯 推荐部署流程

- **阶段一**：本地启动测试（5分钟）
- **阶段二**：部署到Streamlit Cloud展示（10分钟）
- **阶段三**：（可选）部署到企业云用于正式生产

### 📖 详细部署指南

查看 [DEPLOY.md](DEPLOY.md) 获取详细的部署说明，包括：
- 多种部署平台对比
- 常见问题解答
- 性能优化建议
- 安全加固方案

### ⚠️ 重要提示

1. **API密钥管理**：不要在代码中硬编码API密钥，使用环境变量
2. **文件上传限制**：默认支持最大100MB文件
3. **并发限制**：免费平台可能有并发用户限制
4. **数据安全**：不要上传涉密文件

### 🔧 环境变量配置

如果需要配置大模型API密钥，在部署平台的"Environment Variables"中添加：
```
OPENAI_API_KEY=your_api_key_here
```

---

**立即开始体验吧！** 🎊
